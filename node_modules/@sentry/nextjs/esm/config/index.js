import { __assign } from "tslib";
import { constructWebpackConfigFunction } from './webpack';
/**
 * Add Sentry options to the config to be exported from the user's `next.config.js` file.
 *
 * @param userNextConfig The existing config to be exported prior to adding Sentry
 * @param userSentryWebpackPluginOptions Configuration for SentryWebpackPlugin
 * @returns The modified config to be exported
 */
export function withSentryConfig(userNextConfig, userSentryWebpackPluginOptions) {
    if (userNextConfig === void 0) { userNextConfig = {}; }
    if (userSentryWebpackPluginOptions === void 0) { userSentryWebpackPluginOptions = {}; }
    var newWebpackExport = constructWebpackConfigFunction(userNextConfig, userSentryWebpackPluginOptions);
    var finalNextConfig = function (phase, defaults) {
        var materializedUserNextConfig = typeof userNextConfig === 'function' ? userNextConfig(phase, defaults) : userNextConfig;
        return __assign(__assign({}, materializedUserNextConfig), { 
            // TODO When we add a way to disable the webpack plugin, doing so should turn this off, too
            productionBrowserSourceMaps: true, webpack: newWebpackExport });
    };
    return finalNextConfig;
}
//# sourceMappingURL=index.js.map